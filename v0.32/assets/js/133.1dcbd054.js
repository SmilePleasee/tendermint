(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{372:function(e,s,t){"use strict";t.r(s);var a=t(1),o=Object(a.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"tendermint-consensus-reactor"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tendermint-consensus-reactor"}}),e._v(" Tendermint Consensus Reactor")]),e._v(" "),t("p",[e._v("Tendermint Consensus is a distributed protocol executed by validator processes to agree on\nthe next block to be added to the Tendermint blockchain. The protocol proceeds in rounds, where\neach round is a try to reach agreement on the next block. A round starts by having a dedicated\nprocess (called proposer) suggesting to other processes what should be the next block with\nthe "),t("code",[e._v("ProposalMessage")]),e._v(".\nThe processes respond by voting for a block with "),t("code",[e._v("VoteMessage")]),e._v(" (there are two kinds of vote\nmessages, prevote and precommit votes). Note that a proposal message is just a suggestion what the\nnext block should be; a validator might vote with a "),t("code",[e._v("VoteMessage")]),e._v(" for a different block. If in some\nround, enough number of processes vote for the same block, then this block is committed and later\nadded to the blockchain. "),t("code",[e._v("ProposalMessage")]),e._v(" and "),t("code",[e._v("VoteMessage")]),e._v(" are signed by the private key of the\nvalidator. The internals of the protocol and how it ensures safety and liveness properties are\nexplained in a forthcoming document.")]),e._v(" "),t("p",[e._v("For efficiency reasons, validators in Tendermint consensus protocol do not agree directly on the\nblock as the block size is big, i.e., they don't embed the block inside "),t("code",[e._v("Proposal")]),e._v(" and\n"),t("code",[e._v("VoteMessage")]),e._v(". Instead, they reach agreement on the "),t("code",[e._v("BlockID")]),e._v(" (see "),t("code",[e._v("BlockID")]),e._v(" definition in\n"),t("a",{attrs:{href:"https://github.com/tendermint/tendermint/blob/master/docs/spec/blockchain/blockchain.md#blockid",target:"_blank",rel:"noopener noreferrer"}},[e._v("Blockchain"),t("OutboundLink")],1),e._v(" section) that uniquely identifies each block. The block itself is\ndisseminated to validator processes using peer-to-peer gossiping protocol. It starts by having a\nproposer first splitting a block into a number of block parts, that are then gossiped between\nprocesses using "),t("code",[e._v("BlockPartMessage")]),e._v(".")]),e._v(" "),t("p",[e._v("Validators in Tendermint communicate by peer-to-peer gossiping protocol. Each validator is connected\nonly to a subset of processes called peers. By the gossiping protocol, a validator send to its peers\nall needed information ("),t("code",[e._v("ProposalMessage")]),e._v(", "),t("code",[e._v("VoteMessage")]),e._v(" and "),t("code",[e._v("BlockPartMessage")]),e._v(") so they can\nreach agreement on some block, and also obtain the content of the chosen block (block parts). As\npart of the gossiping protocol, processes also send auxiliary messages that inform peers about the\nexecuted steps of the core consensus algorithm ("),t("code",[e._v("NewRoundStepMessage")]),e._v(" and "),t("code",[e._v("NewValidBlockMessage")]),e._v("), and\nalso messages that inform peers what votes the process has seen ("),t("code",[e._v("HasVoteMessage")]),e._v(",\n"),t("code",[e._v("VoteSetMaj23Message")]),e._v(" and "),t("code",[e._v("VoteSetBitsMessage")]),e._v("). These messages are then used in the gossiping\nprotocol to determine what messages a process should send to its peers.")]),e._v(" "),t("p",[e._v("We now describe the content of each message exchanged during Tendermint consensus protocol.")]),e._v(" "),t("h2",{attrs:{id:"proposalmessage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#proposalmessage"}}),e._v(" ProposalMessage")]),e._v(" "),t("p",[e._v("ProposalMessage is sent when a new block is proposed. It is a suggestion of what the\nnext block in the blockchain should be.")]),e._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("type")]),e._v(" ProposalMessage "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("struct")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    Proposal Proposal\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h3",{attrs:{id:"proposal"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#proposal"}}),e._v(" Proposal")]),e._v(" "),t("p",[e._v("Proposal contains height and round for which this proposal is made, BlockID as a unique identifier\nof proposed block, timestamp, and POLRound (a so-called Proof-of-Lock (POL) round) that is needed for\ntermination of the consensus. If POLRound >= 0, then BlockID corresponds to the block that\nis locked in POLRound. The message is signed by the validator private key.")]),e._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("type")]),e._v(" Proposal "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("struct")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    Height           "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int64")]),e._v("\n    Round            "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int")]),e._v("\n    POLRound         "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int")]),e._v("\n    BlockID          BlockID\n    Timestamp        Time\n    Signature        Signature\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h2",{attrs:{id:"votemessage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#votemessage"}}),e._v(" VoteMessage")]),e._v(" "),t("p",[e._v("VoteMessage is sent to vote for some block (or to inform others that a process does not vote in the\ncurrent round). Vote is defined in the "),t("a",{attrs:{href:"https://github.com/tendermint/tendermint/blob/master/docs/spec/blockchain/blockchain.md#blockid",target:"_blank",rel:"noopener noreferrer"}},[e._v("Blockchain"),t("OutboundLink")],1),e._v(" section and contains validator's\ninformation (validator address and index), height and round for which the vote is sent, vote type,\nblockID if process vote for some block ("),t("code",[e._v("nil")]),e._v(" otherwise) and a timestamp when the vote is sent. The\nmessage is signed by the validator private key.")]),e._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("type")]),e._v(" VoteMessage "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("struct")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    Vote Vote\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h2",{attrs:{id:"blockpartmessage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#blockpartmessage"}}),e._v(" BlockPartMessage")]),e._v(" "),t("p",[e._v("BlockPartMessage is sent when gossipping a piece of the proposed block. It contains height, round\nand the block part.")]),e._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("type")]),e._v(" BlockPartMessage "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("struct")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    Height "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int64")]),e._v("\n    Round  "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int")]),e._v("\n    Part   Part\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h2",{attrs:{id:"newroundstepmessage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#newroundstepmessage"}}),e._v(" NewRoundStepMessage")]),e._v(" "),t("p",[e._v("NewRoundStepMessage is sent for every step transition during the core consensus algorithm execution.\nIt is used in the gossip part of the Tendermint protocol to inform peers about a current\nheight/round/step a process is in.")]),e._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("type")]),e._v(" NewRoundStepMessage "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("struct")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    Height                "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int64")]),e._v("\n    Round                 "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int")]),e._v("\n    Step                  RoundStepType\n    SecondsSinceStartTime "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int")]),e._v("\n    LastCommitRound       "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h2",{attrs:{id:"newvalidblockmessage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#newvalidblockmessage"}}),e._v(" NewValidBlockMessage")]),e._v(" "),t("p",[e._v("NewValidBlockMessage is sent when a validator observes a valid block B in some round r,\ni.e., there is a Proposal for block B and 2/3+ prevotes for the block B in the round r.\nIt contains height and round in which valid block is observed, block parts header that describes\nthe valid block and is used to obtain all\nblock parts, and a bit array of the block parts a process currently has, so its peers can know what\nparts it is missing so they can send them.\nIn case the block is also committed, then IsCommit flag is set to true.")]),e._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("type")]),e._v(" NewValidBlockMessage "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("struct")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    Height           "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int64")]),e._v("\n    Round            "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int")]),e._v("    \n    BlockPartsHeader PartSetHeader\n    BlockParts       BitArray\n    IsCommit         "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("bool")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h2",{attrs:{id:"proposalpolmessage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#proposalpolmessage"}}),e._v(" ProposalPOLMessage")]),e._v(" "),t("p",[e._v("ProposalPOLMessage is sent when a previous block is re-proposed.\nIt is used to inform peers in what round the process learned for this block (ProposalPOLRound),\nand what prevotes for the re-proposed block the process has.")]),e._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("type")]),e._v(" ProposalPOLMessage "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("struct")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    Height           "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int64")]),e._v("\n    ProposalPOLRound "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int")]),e._v("\n    ProposalPOL      BitArray\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h2",{attrs:{id:"hasvotemessage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#hasvotemessage"}}),e._v(" HasVoteMessage")]),e._v(" "),t("p",[e._v("HasVoteMessage is sent to indicate that a particular vote has been received. It contains height,\nround, vote type and the index of the validator that is the originator of the corresponding vote.")]),e._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("type")]),e._v(" HasVoteMessage "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("struct")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    Height "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int64")]),e._v("\n    Round  "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int")]),e._v("\n    Type   "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("byte")]),e._v("\n    Index  "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h2",{attrs:{id:"votesetmaj23message"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#votesetmaj23message"}}),e._v(" VoteSetMaj23Message")]),e._v(" "),t("p",[e._v("VoteSetMaj23Message is sent to indicate that a process has seen +2/3 votes for some BlockID.\nIt contains height, round, vote type and the BlockID.")]),e._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("type")]),e._v(" VoteSetMaj23Message "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("struct")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    Height  "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int64")]),e._v("\n    Round   "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int")]),e._v("\n    Type    "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("byte")]),e._v("\n    BlockID BlockID\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),t("h2",{attrs:{id:"votesetbitsmessage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#votesetbitsmessage"}}),e._v(" VoteSetBitsMessage")]),e._v(" "),t("p",[e._v("VoteSetBitsMessage is sent to communicate the bit-array of votes a process has seen for a given\nBlockID. It contains height, round, vote type, BlockID and a bit array of\nthe votes a process has.")]),e._v(" "),t("div",{staticClass:"language-go extra-class"},[t("pre",{pre:!0,attrs:{class:"language-go"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("type")]),e._v(" VoteSetBitsMessage "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("struct")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    Height  "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int64")]),e._v("\n    Round   "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("int")]),e._v("\n    Type    "),t("span",{pre:!0,attrs:{class:"token builtin"}},[e._v("byte")]),e._v("\n    BlockID BlockID\n    Votes   BitArray\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])])}),[],!1,null,null,null);s.default=o.exports}}]);